var $xhrAjax=(function(){var Request=function(){};Request.prototype.ajax=function(options){options=options||{};var url=options.url;var type=(options.type||"GET").toUpperCase();var async=options.async||true;var cache=options.cache===undefined?true:options.cache;var contentType=options.contentType||"application/x-www-form-urlencoded";options.dataType=options.dataType||"json";var data=options.data;var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest()}else{xhr=new ActiveXObject("Microsoft.XMLHTTP")}if(type==="GET"){var params=formatParams(data);xhr.open("GET",url+"?"+params,async);xhr.send(null)}else{var params=formatParams(data);xhr.open("POST",url,async);xhr.setRequestHeader("Content-Type",contentType);xhr.send(params)}xhr.onreadystatechange=function(){if(xhr.readyState===4){var status=xhr.status;if(status===200){options.success&&options.success(xhr.responseText)}else{options.error&&options.error(xhr)}}};function formatParams(){var data=arguments[0];var arr=[];for(var key in data){arr.push(encodeURIComponent(key)+"="+encodeURIComponent(data[key]))}if(!cache){arr.push("rand="+Math.random())}return arr.join("&")}};if(Request.flag){return Request.flag}Request.flag=new Request();return Request.flag})();
